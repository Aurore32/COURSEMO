(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63206cb6"],{"707f":function(e,s,o){"use strict";o("92b8")},"907c":function(e,s,o){"use strict";(function(e){s["a"]={name:"ToolPreviewQuestions",data(){return{exerciseName:void 0,swMoreContent:!0,swShowAnswer:!1,swShowQid:!1,swOnlyShowAnswer:!1,swShowSource:!1,disSpaceBtn:!1,exam:{},questions:[],showMS:!1,showExplain:!1,stSinglePage:!1,hideAllControlls:!1,allowBreak:!1,studentName:"",stLargeScreen:!1}},computed:{},mounted(){this.exerciseName=this.$route.query._name,this.init()},methods:{init(){const s=this;let o=this.$route.query._from;const t={id:this.$route.params.examId};if("tool:view-question"==this.$route.name&&(o="q",t.id=this.$route.params.qid),"q"===o){s.exerciseName="QUESTION "+t.id,s.syncPageTitle(s);const o=[t.id];e.adp.invoke("POST","CoreQuestionService","FetchByQids",{qids:o,parse_options:0}).then(e=>{s.questions=e.data.questions.map(e=>(e._flagMoreContent=s.swMoreContent,e._flagShowAnswer=s.swShowAnswer,e._flagShowExplain=!1,e._flagShowQid=s.swShowQid,e._flagShowSource=s.swShowSource,e))})}else"core"===o?e.pct.invoke("GET","ExamService","get",t).then(o=>{if(o.ok){s.exam=o.data,s.syncPageTitle(s);const t=o.data.qids;e.adp.invoke("POST","CoreQuestionService","FetchByQids",{qids:t,parse_options:0}).then(e=>{s.questions=e.data.questions.map(e=>(e._flagMoreContent=s.swMoreContent,e._flagShowAnswer=s.swShowAnswer,e._flagShowExplain=!1,e._flagShowQid=s.swShowQid,e._flagShowSource=s.swShowSource,e))})}}):"lms"==o?e.ae.invoke("POST","QgroupService","ExamDetail",t).then(o=>{if(o.ok){s.exam=o.data,s.syncPageTitle(s);const t=o.data.qids;e.adp.invoke("POST","CoreQuestionService","FetchByQids",{qids:t,parse_options:0}).then(e=>{s.questions=e.data.questions.map(e=>(e._flagMoreContent=s.swMoreContent,e._flagShowAnswer=s.swShowAnswer,e._flagShowExplain=!1,e._flagShowQid=s.swShowQid,e._flagShowSource=s.swShowSource,e))})}}):e.ae.invoke("POST","QgroupService","ExamDetail",t).then(o=>{if(o.ok){s.exam=o.data,s.syncPageTitle(s);const t=o.data.qids;e.adp.invoke("POST","QuestionService","FetchByQids",{qids:t}).then(e=>{s.questions=e.data.questions.map(e=>(e._flagMoreContent=s.swMoreContent,e._flagShowAnswer=s.swShowAnswer,e._flagShowExplain=!1,e._flagShowQid=s.swShowQid,e._flagShowSource=s.swShowSource,e))})}})},syncPageTitle(e){window.document.title=e.exerciseName?e.exerciseName:e.exam.name},handleChangeSwitchMoreContent(e){this.questions.forEach(s=>s._flagMoreContent=e)},handleChangeSwitchShowAnswer(e){this.questions.forEach(s=>s._flagShowAnswer=e),this.questions.forEach(s=>s._flagShowExplain=e)},handleChangeSwitchShowQid(e){this.questions.forEach(s=>s._flagShowQid=e)},handleChangeSwitchOnlyShowAnswer(e){this.questions.forEach(s=>s._flagOnlyShowAnswer=e),this.questions.forEach(e=>e._flagShowAnswer=!0),this.questions.forEach(e=>e._flagShowExplain=!1)},handleChangeSwitchShowSource(e){this.questions.forEach(s=>s._flagShowSource=e)},handleChangeSwitchShowMS(e){this.questions.forEach(s=>s._flagShowAnswer=e)},handleChangeSwitchShowExplain(e){this.questions.forEach(s=>s._flagShowExplain=e)},handleStSinglePage(e){const s=layui.$;this.questions.forEach((o,t)=>{t>0&&2==o.question_type&&s(`.c-questions .c-question:eq(${t})`).css("pageBreakBefore",e?"always":"auto")})},handleStLargeScreen(e){},handleWithAnswerSpace(){const e=this;this.showMS?(e.showExplain=!1,this.questions.forEach(e=>e._flagShowExplain=!1),e.disSpaceBtn=!0,e.$nextTick(()=>{const s=layui.jquery;s(".p-answer-wrap").each((function(){const o=s(this).outerHeight(),t=`<div style="height: ${o}px" class="resized-answer-area"><span>`+e.$t("mo.pct.answerBlankArea")+"</span></div>";s(this).after(t)})),e.swShowAnswer=!1,e.questions.forEach(e=>e._flagShowAnswer=!1)})):this.$Message.warn(this.$t("mo.pct.msgExpandAllAnswers"))},handlePrint(e){window.print()},handleHideOrShowAllControlls(e){this.hideAllControlls=e},handleAllowBreak(e){this.allowBreak=e},renderMetaInfo(e){const s={s1:"Spring",s2:"Summer",s4:"Winter"},o=s["s"+String(e.season)]||"";let{year:t,paper_no:n,miniq_no:a}=e||{};return t=t?" "+t:"",n=n?"Paper"+n:"",a=a?"Q"+a:"",[t,o,n,a].filter(e=>e).join("/")}}}}).call(this,o("a46c")["default"])},"92b8":function(e,s,o){},dbc0:function(e,s,o){"use strict";o.r(s);var t=function(){var e=this,s=e._self._c;return s("div",{staticClass:"page-preview-questions"},[s("div",{class:["c-main-box layui-container",{"js-large-screen":e.stLargeScreen}]},[e.hideAllControlls?e._e():s("div",{staticClass:"p-toolbar"},[s("div",{staticClass:"p-toobar-left"},[s("h-switch",{on:{change:e.handleChangeSwitchMoreContent},model:{value:e.swMoreContent,callback:function(s){e.swMoreContent=s},expression:"swMoreContent"}},[s("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("mo.pct.foldAll")))]),s("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("mo.pct.expandAll")))])]),s("h-switch",{on:{change:e.handleChangeSwitchOnlyShowAnswer},model:{value:e.swOnlyShowAnswer,callback:function(s){e.swOnlyShowAnswer=s},expression:"swOnlyShowAnswer"}},[s("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("mo.pct.hideOnlyAnswer")))]),s("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("mo.pct.showOnlyAnswer")))])]),s("h-switch",{on:{change:e.handleChangeSwitchShowQid},model:{value:e.swShowQid,callback:function(s){e.swShowQid=s},expression:"swShowQid"}},[s("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("mo.pct.hideQuestionId")))]),s("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("mo.pct.showQuestionId")))])]),s("h-switch",{on:{change:e.handleChangeSwitchShowSource},model:{value:e.swShowSource,callback:function(s){e.swShowSource=s},expression:"swShowSource"}},[s("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("mo.pct.hideQuestionSource")))]),s("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("mo.pct.showQuestionSource")))])]),s("h-switch",{on:{change:e.handleChangeSwitchShowMS},model:{value:e.showMS,callback:function(s){e.showMS=s},expression:"showMS"}},[s("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("mo.pct.hideAnswer")))]),s("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("mo.pct.showAnswer")))])]),s("h-switch",{on:{change:e.handleChangeSwitchShowExplain},model:{value:e.showExplain,callback:function(s){e.showExplain=s},expression:"showExplain"}},[s("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("mo.pct.hideExplain")))]),s("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("mo.pct.showExplain")))])]),s("h-switch",{on:{change:e.handleStSinglePage},model:{value:e.stSinglePage,callback:function(s){e.stSinglePage=s},expression:"stSinglePage"}},[s("span",{attrs:{slot:"open"},slot:"open"},[e._v("取消结构题独占一页")]),s("span",{attrs:{slot:"close"},slot:"close"},[e._v("结构题独占一页")])]),s("h-switch",{on:{change:e.handleAllowBreak},model:{value:e.allowBreak,callback:function(s){e.allowBreak=s},expression:"allowBreak"}},[s("span",{attrs:{slot:"open"},slot:"open"},[e._v("打印时，允许题目跨页截断")]),s("span",{attrs:{slot:"close"},slot:"close"},[e._v("打印时，允许题目跨页截断")])])],1),s("div",{staticClass:"p-right-btns"},[s("h-switch",{on:{change:e.handleStLargeScreen},model:{value:e.stLargeScreen,callback:function(s){e.stLargeScreen=s},expression:"stLargeScreen"}},[s("span",{attrs:{slot:"open"},slot:"open"},[e._v("默认宽度")]),s("span",{attrs:{slot:"close"},slot:"close"},[e._v("宽屏显示")])]),s("Button",{attrs:{color:"yellow",disabled:e.disSpaceBtn},on:{click:e.handleWithAnswerSpace}},[e._v(e._s(e.$t("mo.pct.leaveBlankArea"))+" ")]),s("Button",{attrs:{color:"green"},on:{click:e.handleHideOrShowAllControlls}},[e._v(e._s("清爽模式")+" ")]),s("Button",{attrs:{color:"primary"},on:{click:e.handlePrint}},[e._v(e._s(e.$t("mo.pct.print"))+" ")])],1)]),s("div",{staticClass:"c-exam-cover"},[s("div",{class:["p-exam-name",{center:!e.studentName}]},[s("p",[e._v(e._s(e.exerciseName?e.exerciseName:e.exam.name))]),e.hideAllControlls?e._e():s("input",{directives:[{name:"model",rawName:"v-model",value:e.studentName,expression:"studentName"}],attrs:{type:"text",placeholder:"学生姓名"},domProps:{value:e.studentName},on:{input:function(s){s.target.composing||(e.studentName=s.target.value)}}}),e.hideAllControlls?e._e():s("label",[e._v(e._s(e.studentName))])])]),s("div",{staticClass:"c-questions"},e._l(e.questions,(function(o,t){return s("div",{key:o.id,class:["c-question",{fold:!o._flagMoreContent},{"avoid-break":!e.allowBreak&&t>0},{mcq:1===o.question_type}]},[s("span",{staticClass:"p-index"},[e._v("NO. "+e._s(t+1))]),s("span",{class:["p-id",{"layui-hide":!o._flagShowQid}]},[e._v(e._s(e.$t("mo.pct.qid"))+"："+e._s(o.id))]),s("div",{class:{"layui-hide":o._flagOnlyShowAnswer}},[s("div",{staticClass:"p-content",domProps:{innerHTML:e._s(o.content)}}),e.hideAllControlls?e._e():s("div",{staticClass:"p-fold"},[s("a",{staticClass:"op-fold",attrs:{href:"javascript:;"},on:{click:function(e){o._flagMoreContent=!o._flagMoreContent}}},[e._v(e._s(o._flagMoreContent?"[-"+e.$t("mo.pct.fold")+"]":"[+"+e.$t("mo.pct.unfold")+"]"))])])]),e.hideAllControlls?e._e():s("div",{class:["p-action-wrap",{"show-source":e.swShowSource}]},[s("div",{directives:[{name:"visible",rawName:"v-visible",value:null!=o.season&&o._flagShowSource,expression:"e.season != null && e._flagShowSource"}],staticClass:"p-meta-info"},[s("span",[e._v(e._s(e._f("dictMapping")(o.ls_name,"lsNames")))]),s("span",[e._v(e._s(e.renderMetaInfo(o)))])]),o._flagOnlyShowAnswer?e._e():s("div",{staticClass:"p-action-btns"},[e.hideAllControlls?e._e():s("Button",{on:{click:function(e){o._flagShowAnswer=!o._flagShowAnswer}}},[e._v(e._s(o._flagShowAnswer?e.$t("mo.pct.hideAnswer"):e.$t("mo.pct.showAnswer"))+" ")]),e.hideAllControlls?e._e():s("Button",{on:{click:function(e){o._flagShowExplain=!o._flagShowExplain}}},[e._v(e._s(o._flagShowExplain?e.$t("mo.pct.hideExplain"):e.$t("mo.pct.showExplain"))+" ")])],1)]),o._flagShowAnswer?s("div",{class:["p-answer-wrap"]},[o.answer&&1!==o.question_type?s("div",{staticClass:"p-answer",domProps:{innerHTML:e._s(o.answer)}}):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:1===o.question_type,expression:"e.question_type === 1"}],staticClass:"p-answer-option"},[e._v(" "+e._s(o.answer_option)+" ")])]):e._e(),o.explain&&o._flagShowExplain?s("div",{class:["p-explain-wrap"]},[s("div",{staticClass:"p-explain",domProps:{innerHTML:e._s(o.explain)}})]):e._e(),o.comment&&o._flagShowExplain?s("div",{class:["p-comment-wrap"]},[s("div",{staticClass:"p-comment",domProps:{innerHTML:e._s(o.comment)}})]):e._e()])})),0)])])},n=[],a=o("907c"),l=a["a"],i=(o("707f"),o("2877")),r=Object(i["a"])(l,t,n,!1,null,null,null);s["default"]=r.exports}}]);